<!DOCTYPE html>
<html lang="en">
<head>
	<title>GE Lotto</title>
  	<meta charset="utf-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1">

  	<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
  	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  	<link rel="stylesheet" href="css/style.css">
</head>
<body>
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2" crossorigin="anonymous"></script>
  	<script src="js/utils.js" defer></script>
  	<script src="js/main.js" defer></script>

	<div class="container header">
		<h1>Guild Expedition Lotto</h1>
		<p>This will generate a list of winners according to the amount of donations available and the encounter filters below.</p>
	</div>

	<div class="container">
		<form>
			<p>Encounters</p>
			<div class="form-row align-items-center">
				<div class="col-auto">
					<div class="input-group mb-2" data-toggle="tooltip" data-placement="bottom" title="Maximum number of encounters to be awarded.">
						<div class="input-group-prepend">
							<div class="input-group-text">Max</div>
						</div>
						<input id="inputMaxEncounters" type="text" class="form-control" placeholder="64">
					</div>
				</div>
				<div class="col-auto">
					<div class="input-group mb-2" data-toggle="tooltip" data-placement="bottom" title="Minimum number of encounters to participate.">
						<div class="input-group-prepend">
							<div class="input-group-text">Min</div>
						</div>
						<input id="inputMinEncounters" type="text" class="form-control" placeholder="0">
					</div>
				</div>
				<!--<div class="col-auto">
					<div class="form-check" data-toggle="tooltip" data-placement="bottom" data-html="true" title="Select winners from the donor list only.">
				        <input class="form-check-input" type="checkbox" id="autoSizingCheck2">
				        <label class="form-check-label" for="autoSizingCheck2">Donors only?</label>
				    </div>
				</div>-->
			</div>
			<p id="fps_available">FPs available: 0</p>
			<div class="form-row align-items-center">
				<div class="col-auto">
					<div class="input-group mb-2" data-toggle="tooltip" data-placement="bottom" title="Restrict the number of FPs in the pool.">
						<div class="input-group-prepend">
							<div class="input-group-text">Max</div>
						</div>
						<input id="inputMaxFPs" type="text" class="form-control">
					</div>
				</div>
			</div>
			<div class="form-row align-items-center">
				<div class="col-auto">
					<div class="input-group">
						<div class="input-group-append">
							<button id="search_button" class="btn btn-success" type="button" onclick="handleLotteryClick();" data-toggle="tooltip" data-placement="bottom" title="Participants and donors are shuffled to keep things fair.">Lottery!</button>
							<button id="info_button" class="btn btn-info" type="button" onclick="handleInfoClick();">More Info</button>
							<button id="refresh_button" class="btn btn-dark" type="button" onclick="handleReloadData();" title="Reload from the sheet<br>[Players] {0}<br>[Donors] {1}<br>[Donations] {2} FPs" data-toggle="tooltip" data-placement="bottom" data-html="true">
							<svg version="1.1" width="12" height="16" viewBox="0 0 12 12" aria-hidden="true">
								<path fill="#FFFFFF" fill-rule="evenodd" d="M10.24 7.4a4.15 4.15 0 0 1-1.2 3.6 4.346 4.346 0 0 1-5.41.54L4.8 10.4.5 9.8l.6 4.2 1.31-1.26c2.36 1.74 5.7 1.57 7.84-.54a5.876 5.876 0 0 0 1.74-4.46l-1.75-.34zM2.96 5a4.346 4.346 0 0 1 5.41-.54L7.2 5.6l4.3.6-.6-4.2-1.31 1.26c-2.36-1.74-5.7-1.57-7.85.54C.5 5.03-.06 6.65.01 8.26l1.75.35A4.17 4.17 0 0 1 2.96 5z"/>
							</svg> Reload</button>
						</div>
					</div>
				</div>
			</div>
		</form>
	</div>

	<div id="tables_info" class="container" style="display:none;">
		<div class="row">
			<div class="table-responsive col">
				<table id="table_players" class="table table-sm table-striped table-light">
					<caption>Participating players</caption>
					<thead class="thead-dark">
						<tr>
							<th scope="col">Players</th>
							<th scope="col">Encounters</th>
							<th scope="col">Building</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>
			<div class="table-responsive col">
				<table id="table_donors" class="table table-sm table-striped table-light">
					<caption>Donors</caption>
					<thead class="thead-dark">
						<tr>
							<th scope="col">Donors</th>
							<th scope="col">Forge points</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>
		</div>
	</div>

	<div id="tables_lottery" class="container" style="display:none;">
		<div class="row">
			<div class="responsive col">
				<div class="bd-clipboard">
					<button type="button" class="btn btn-clipboard btn-primary btn-sm float-right" title="" data-original-title="Copy to clipboard" onclick="copyTable('table_lotwinners')">Copy</button>
				</div>
				<table id="table_lotwinners" class="table table-sm table-striped table-light">
					<thead class="thead-dark">
						<tr>
							<th scope="col">Winners</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>
			<div class="responsive col">
				<div class="bd-clipboard">
					<button type="button" class="btn btn-clipboard btn-primary btn-sm float-right" title="" data-original-title="Copy to clipboard" onClick="copyTable('table_lotdonors')">Copy</button>
				</div> 
				<table id="table_lotdonors" class="table table-sm table-striped table-light">
					<thead class="thead-dark">
						<tr>
							<th scope="col">Donations</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</body>
</html>